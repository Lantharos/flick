declare web@4000

route GET "/search" =>
    print "Query params: "
    print query
    respond json=query
end

route POST "/users" =>
    print "Request body: "
    print body
    print "Headers: "
    print headers

    assume body =>
        respond json={"message": "User created", "data": body}, status=201
    otherwise =>
        respond json={"error": "No body provided"}, status=400
    end
end

route GET "/info" =>
    free userAgent = headers["user-agent"]
    respond json={"method": req.method, "url": req.url, "userAgent": userAgent}
end

route POST "/echo" =>
    respond json={"received": body, "query": query, "method": req.method}
end

